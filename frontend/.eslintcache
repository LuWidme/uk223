[{"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\index.tsx":"1","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\App.tsx":"2","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Router\\Router.tsx":"3","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Contexts\\ActiveUserContext.tsx":"4","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\config\\Api.ts":"5","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Services\\AuthorityService.ts":"6","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Services\\UserService.ts":"7","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Router\\PrivateRoute.tsx":"8","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\HomePage.tsx":"9","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\LoginPage\\LoginPage.tsx":"10","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\ManageGroups.tsx":"11","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\GroupUserPage.tsx":"12","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\Text.tsx":"13","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\Navbar.tsx":"14","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Molecules\\GroupDisplay.tsx":"15","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\ActiveButton.tsx":"16","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Organism\\EditAddGroup.tsx":"17","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\RoundImg.tsx":"18","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\TextInput.tsx":"19"},{"size":382,"mtime":1667376502211,"results":"20","hashOfConfig":"21"},{"size":316,"mtime":1667376502200,"results":"22","hashOfConfig":"21"},{"size":1979,"mtime":1667550634987,"results":"23","hashOfConfig":"21"},{"size":6322,"mtime":1667376502201,"results":"24","hashOfConfig":"21"},{"size":1843,"mtime":1667550635017,"results":"25","hashOfConfig":"21"},{"size":1174,"mtime":1667376502205,"results":"26","hashOfConfig":"21"},{"size":808,"mtime":1667376502207,"results":"27","hashOfConfig":"21"},{"size":2265,"mtime":1667376502202,"results":"28","hashOfConfig":"21"},{"size":283,"mtime":1667550635014,"results":"29","hashOfConfig":"21"},{"size":3320,"mtime":1667376502209,"results":"30","hashOfConfig":"21"},{"size":3166,"mtime":1667550635015,"results":"31","hashOfConfig":"21"},{"size":2996,"mtime":1667550635012,"results":"32","hashOfConfig":"21"},{"size":852,"mtime":1667550634993,"results":"33","hashOfConfig":"21"},{"size":772,"mtime":1667550634990,"results":"34","hashOfConfig":"21"},{"size":1391,"mtime":1667550635006,"results":"35","hashOfConfig":"21"},{"size":456,"mtime":1667550634989,"results":"36","hashOfConfig":"21"},{"size":3116,"mtime":1667550873760,"results":"37","hashOfConfig":"21"},{"size":310,"mtime":1667550634992,"results":"38","hashOfConfig":"21"},{"size":495,"mtime":1667550635002,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"4ijd62",{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"fatalErrorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":1,"source":"58","usedDeprecatedRules":"42"},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"61","messages":"62","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"63","messages":"64","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"67","messages":"68","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"77","messages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\index.tsx",[],["81","82"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\App.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Router\\Router.tsx",["83","84","85","86","87","88","89","90","91","92"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Contexts\\ActiveUserContext.tsx",["93"],"import { createContext, useEffect, useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport api from '../config/Api';\r\nimport roles from '../config/Roles';\r\nimport AuthorityService from '../Services/AuthorityService';\r\nimport UserService from '../Services/UserService';\r\nimport { User } from '../types/models/User.model';\r\nimport { Nullable } from '../types/Nullable';\r\n\r\n/**\r\n * USER_DATA_LOCAL_STORAGE_KEY defines the localStorageKey in which the\r\n * activeUser gets stored.\r\n */\r\nexport const USER_DATA_LOCAL_STORAGE_KEY = 'user';\r\nexport const TOKEN_LOCAL_STORAGE_KEY = 'token';\r\n\r\n/**\r\n * ActiveUserContextType defines the provided values\r\n */\r\nexport type ActiveUserContextType = {\r\n  user: Nullable<User>;\r\n  login: (email: string, password: string) => Promise<boolean>;\r\n  logout: () => void;\r\n  setActiveUser: (user: User) => void;\r\n  loadActiveUser: () => void;\r\n  checkRole: (roleToCheck: keyof typeof roles) => boolean;\r\n};\r\n\r\n/**\r\n * noContextProviderFound is a method that throws an error and is used\r\n * inside the defaultContextValue\r\n */\r\nconst noContextProviderFound = () => {\r\n  throw new Error('No provider for the ActiveUserContext found');\r\n};\r\n\r\n/**\r\n * defaultContextValue defines the default values for the ActiveUserContext.\r\n */\r\nconst defaultContextValue: ActiveUserContextType = {\r\n  user: null,\r\n  login: noContextProviderFound,\r\n  logout: noContextProviderFound,\r\n  setActiveUser: noContextProviderFound,\r\n  loadActiveUser: noContextProviderFound,\r\n  checkRole: noContextProviderFound,\r\n};\r\n\r\n/**\r\n * ActiveUserContext has the purpose of providing the currently active user\r\n * as well as related values, modifiers and related operations such as login\r\n * and logout.\r\n */\r\nconst ActiveUserContext =\r\n  createContext<ActiveUserContextType>(defaultContextValue);\r\nexport default ActiveUserContext;\r\n\r\n/**\r\n * Props for the ActiveUserContextProvider Component\r\n */\r\ntype ActiveUserContextProviderProps = {\r\n  children: React.ReactNode;\r\n};\r\n\r\n/**\r\n * ActiveUserContextProvider Component is used to provide the ActiveUserContext\r\n * to all child-components.\r\n * @param children consists of all the elements that are located inside the\r\n */\r\nexport const ActiveUserContextProvider = ({\r\n  children,\r\n}: ActiveUserContextProviderProps) => {\r\n  /**\r\n   * Try to load the user data that is stored inside the LocalStorage.\r\n   * If non is present, null will be returned.\r\n   */\r\n  const loadSavedUserData = (): Nullable<User> => {\r\n    const storeUser = localStorage.getItem(USER_DATA_LOCAL_STORAGE_KEY);\r\n    if (storeUser === null) return null;\r\n    return JSON.parse(storeUser);\r\n  };\r\n\r\n  // The following line defines the user state which is holding the user\r\n  // data inside this context.\r\n  const [user, setUser] = useState<Nullable<User>>(() => loadSavedUserData());\r\n  const navigate = useNavigate();\r\n  /**\r\n   * Update the user that is provided by the ActiveUserContext\r\n   * @param updatedUser\r\n   */\r\n  const setActiveUser = (updatedUser: User) => {\r\n    setUser(updatedUser);\r\n    localStorage.setItem(\r\n      USER_DATA_LOCAL_STORAGE_KEY,\r\n      JSON.stringify(updatedUser)\r\n    );\r\n  };\r\n\r\n  /**\r\n   * Remove all user and authorization related data from the localStorage\r\n   */\r\n  const resetAuthorization = () => {\r\n    // Reset the stored data inside the AuthorityService.\r\n    AuthorityService.clearAuthorities();\r\n    // Clear all data from the localStorage.\r\n    localStorage.clear();\r\n    // Set the user, which is stored inside the context to null.\r\n    setUser(null);\r\n  };\r\n\r\n  /**\r\n   * Logout the currently active user by resetting the stored user data\r\n   * and redirecting to the LoginPage.\r\n   */\r\n  const logout = () => {\r\n    // If no token is saved inside the local storage clear the localStorage directly\r\n    if (localStorage.getItem(TOKEN_LOCAL_STORAGE_KEY) === null) {\r\n      resetAuthorization();\r\n      return;\r\n    }\r\n    // If a token is present send a logout-request and clear the localStorage afterwards\r\n    api.get('/logout').finally(resetAuthorization);\r\n    //navigate to login page\r\n    navigate('/login');\r\n  };\r\n\r\n  /**\r\n   * Login with the provided credentials. If successful the current user gets\r\n   * updated and stored inside the context. Also the JWT-Token for further\r\n   * request based authentication is stored inside the localStorage.\r\n   * @param email\r\n   * @param password\r\n   */\r\n  const login = async (email: string, password: string) => {\r\n    await api.post('user/login', { email, password }).then((response: any) => {\r\n      console.log(response.headers.authorization);\r\n      localStorage.setItem(\r\n        TOKEN_LOCAL_STORAGE_KEY,\r\n        response.headers.authorization\r\n      );\r\n      setActiveUser(response.data);\r\n      return true;\r\n    });\r\n    return false;\r\n  };\r\n\r\n  /**\r\n   * Request the user data for the currently active user from the api\r\n   * and save it to the context-state.\r\n   */\r\n  const loadActiveUser = () => {\r\n    return user\r\n      ? UserService.getUser(user.id).then((res: any) => {\r\n          setActiveUser(res.data);\r\n        })\r\n      : null;\r\n  };\r\n\r\n  function activeUserHasRole(roleToCheck: keyof typeof roles): boolean {\r\n    return user ? user.roles.some((role) => role.name === roleToCheck) : false;\r\n  }\r\n\r\n  /**\r\n   * Try to load the user-object from the localStorage if present.\r\n   * This is done automatically on the first render of this component.\r\n   */\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(TOKEN_LOCAL_STORAGE_KEY);\r\n    if (token !== null) {\r\n      loadActiveUser();\r\n    }\r\n  }, []);\r\n\r\n  /**\r\n   * If the user state is updated and the user is not equal to null,\r\n   * the data used in the AuthorityService as well as the data stored inside\r\n   * the localStorage will be updated with the new user-data.\r\n   */\r\n  useEffect(() => {\r\n    if (user !== null) {\r\n      AuthorityService.initAuthoritySet(user);\r\n      localStorage.setItem(USER_DATA_LOCAL_STORAGE_KEY, JSON.stringify(user));\r\n    }\r\n  }, [user]);\r\n\r\n  return (\r\n    <div>\r\n      <ActiveUserContext.Provider\r\n        value={{\r\n          user,\r\n          setActiveUser,\r\n          login,\r\n          logout,\r\n          loadActiveUser,\r\n          checkRole: activeUserHasRole,\r\n        }}\r\n      >\r\n        {children}\r\n      </ActiveUserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\config\\Api.ts",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Services\\AuthorityService.ts",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Services\\UserService.ts",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\Router\\PrivateRoute.tsx",["94"],"import React, { useContext } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport * as jwt from 'jsonwebtoken';\r\nimport ActiveUserContext from '../Contexts/ActiveUserContext';\r\nimport AuthorityService from '../Services/AuthorityService';\r\nimport { Authority } from '../types/models/Authority.model';\r\n\r\ninterface Props {\r\n  element: React.ReactElement;\r\n  authorities: Authority[];\r\n}\r\n\r\ntype JWTType = {\r\n  iss: string;\r\n  exp: number;\r\n};\r\n\r\nconst PrivateRoute: React.FC<Props> = ({\r\n  element: RouteComponent,\r\n  authorities: authorities,\r\n}) => {\r\n  const activeUserContext = useContext(ActiveUserContext);\r\n  /**\r\n   * isLoggedIn checks if the token, which is saved inside the localStorage,\r\n   * exists, isn't expired yet and has been issued by the correct issuer.\r\n   * If all of the above is true the user is seen as logged in.\r\n   */\r\n  const isLoggedIn = () => {\r\n    let tokenString = localStorage.getItem('token');\r\n    if (!tokenString) {\r\n      console.error('no token found');\r\n      return false;\r\n    }\r\n    tokenString = tokenString.replace('Bearer ', '');\r\n    const token: JWTType = jwt.decode(tokenString) as JWTType;\r\n    // Check if token does not exist or doesn't have an expiration claim or is expired.\r\n    if (!token || !token.exp || token.exp < Date.now() / 1000) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n  /**\r\n   * If the user is not logged in call activeUserContext.logout, which destroys\r\n   * all locally saved user data and redirects to /login.\r\n   */\r\n  if (!isLoggedIn()) {\r\n    activeUserContext.logout();\r\n    return <Navigate to='/login' replace={true} />;\r\n  }\r\n  /**\r\n   * Check if the active user has at least 1 of the needed authorities.\r\n   * If no authorities are needed true is returned.\r\n   */\r\n  const hasNeededAuthorities =\r\n    authorities.length === 0 || authorities.some(AuthorityService.hasAuthority);\r\n\r\n  /**\r\n   * If the user doesn't possess the needed authorities Redirect the user to\r\n   * /unauthorized\r\n   */\r\n  if (!hasNeededAuthorities) {\r\n    return <Navigate to='/unauthorized' replace={true} />;\r\n  }\r\n\r\n  // All checks passed\r\n  return (\r\n    // Pagelayout puts the Navigation, Menu etc. around the component\r\n    RouteComponent\r\n  );\r\n};\r\nexport default PrivateRoute;\r\n","C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\HomePage.tsx",["95","96","97"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\LoginPage\\LoginPage.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\ManageGroups.tsx",["98","99","100","101"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\pages\\GroupUserPage.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\Text.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\Navbar.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Molecules\\GroupDisplay.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\ActiveButton.tsx",[],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Organism\\EditAddGroup.tsx",["102"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\RoundImg.tsx",["103"],"C:\\Users\\Manuel\\Documents\\.Module\\uk223\\frontend\\src\\components\\Atoms\\TextInput.tsx",[],{"ruleId":"104","replacedBy":"105"},{"ruleId":"106","replacedBy":"107"},{"ruleId":"108","severity":1,"message":"109","line":1,"column":17,"nodeType":"110","messageId":"111","endLine":1,"endColumn":27},{"ruleId":"108","severity":1,"message":"112","line":1,"column":29,"nodeType":"110","messageId":"111","endLine":1,"endColumn":38},{"ruleId":"108","severity":1,"message":"113","line":1,"column":40,"nodeType":"110","messageId":"111","endLine":1,"endColumn":48},{"ruleId":"108","severity":1,"message":"114","line":4,"column":8,"nodeType":"110","messageId":"111","endLine":4,"endColumn":25},{"ruleId":"108","severity":1,"message":"115","line":5,"column":3,"nodeType":"110","messageId":"111","endLine":5,"endColumn":26},{"ruleId":"108","severity":1,"message":"116","line":9,"column":8,"nodeType":"110","messageId":"111","endLine":9,"endColumn":11},{"ruleId":"108","severity":1,"message":"117","line":10,"column":10,"nodeType":"110","messageId":"111","endLine":10,"endColumn":16},{"ruleId":"108","severity":1,"message":"118","line":10,"column":18,"nodeType":"110","messageId":"111","endLine":10,"endColumn":21},{"ruleId":"108","severity":1,"message":"119","line":12,"column":10,"nodeType":"110","messageId":"111","endLine":12,"endColumn":22},{"ruleId":"108","severity":1,"message":"120","line":13,"column":10,"nodeType":"110","messageId":"111","endLine":13,"endColumn":14},{"ruleId":"121","severity":1,"message":"122","line":172,"column":6,"nodeType":"123","endLine":172,"endColumn":8,"suggestions":"124"},{"ruleId":"125","severity":1,"message":"126","line":20,"column":3,"nodeType":"127","messageId":"128","endLine":20,"endColumn":27,"fix":"129"},{"ruleId":"108","severity":1,"message":"130","line":1,"column":8,"nodeType":"110","messageId":"111","endLine":1,"endColumn":13},{"ruleId":"108","severity":1,"message":"116","line":2,"column":8,"nodeType":"110","messageId":"111","endLine":2,"endColumn":11},{"ruleId":"108","severity":1,"message":"115","line":3,"column":10,"nodeType":"110","messageId":"111","endLine":3,"endColumn":33},{"ruleId":"108","severity":1,"message":"131","line":6,"column":10,"nodeType":"110","messageId":"111","endLine":6,"endColumn":14},{"ruleId":"132","severity":1,"message":"133","line":66,"column":9,"nodeType":"134","messageId":"135","endLine":66,"endColumn":15},{"ruleId":"136","severity":1,"message":"137","line":77,"column":26,"nodeType":"138","messageId":"139","endLine":77,"endColumn":28},{"ruleId":"136","severity":1,"message":"140","line":82,"column":22,"nodeType":"138","messageId":"139","endLine":82,"endColumn":24},{"ruleId":"108","severity":1,"message":"115","line":7,"column":10,"nodeType":"110","messageId":"111","endLine":7,"endColumn":33},{"ruleId":"141","severity":1,"message":"142","line":14,"column":10,"nodeType":"143","endLine":14,"endColumn":51},"no-native-reassign",["144"],"no-negated-in-lhs",["145"],"@typescript-eslint/no-unused-vars","'useContext' is defined but never used.","Identifier","unusedVar","'useEffect' is defined but never used.","'useState' is defined but never used.","'ActiveUserContext' is defined but never used.","'TOKEN_LOCAL_STORAGE_KEY' is defined but never used.","'api' is defined but never used.","'decode' is defined but never used.","'Jwt' is defined but never used.","'GroupDisplay' is defined but never used.","'User' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'loadActiveUser'. Either include it or remove the dependency array.","ArrayExpression",["146"],"no-useless-rename","Destructuring assignment authorities unnecessarily renamed.","Property","unnecessarilyRenamed",{"range":"147","text":"148"},"'axios' is defined but never used.","'Link' is defined but never used.","no-unreachable","Unreachable code.","BreakStatement","unreachableCode","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","Expected '!==' and instead saw '!='.","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","no-global-assign","no-unsafe-negation",{"desc":"149","fix":"150"},[531,555],"authorities","Update the dependencies array to be: [loadActiveUser]",{"range":"151","text":"152"},[5566,5568],"[loadActiveUser]"]